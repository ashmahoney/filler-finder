<!DOCTYPE html>
<meta charset='utf-8' />
<link rel='stylesheet' href='/stylesheets/style.css'/>
<link rel='stylesheet' href='/stylesheets/home.css'/>
<link href="https://fonts.googleapis.com/css?family=Cabin|Merienda" rel="stylesheet">
<title> Filler at {{ filler.location }} </title>

<style>
  #minimap {
    background-color: lightblue;
    width: 50%;
    height: 300px;
    border: 1px solid grey;
    box-shadow: 0 0 30px grey;
    margin: 0 auto;
    margin-top: 30px;
    padding: 10px;
  }
</style>

<a id='homeButton' href='/' >
<div id='topPage'>
  <div id='titleStyle'>
      <div id='innerbox'>
      <h1>ðŸ’§ Filler Finder </h1>
    </div>
  </div>
<a href='/' >

  <div id='log'>
    {% if not current_user %}
      <a href = "{{login_url}}">
        <button> Login </button>
      </a>
    {% else %}
      <a href = "{{logout_url}}">
        <button> Logout </button>
      </a>
    {% endif %}
  </div>
</div>

<div id='slogan'>
  <h3> Information for Filler at {{ filler.location }}: </h3>
</div>

<div id='minimap'>
  <script >
  let API_KEY = 'AIzaSyADULoh4vZX2MsZs4SAgpTgOaXPbjsCNBA';
  let geocoder;
  function initMap() {
    geocoder = new google.maps.Geocoder();
    //Initial location
    let location = {lat: 37.7749, lng: -122.4194};
    //The map
    let map = new google.maps.Map(document.querySelector('#minimap'), {
        zoom: 18,
        center: location,
      });

    let marker_location = "{{ filler.location }}";

    geocoder.geocode( { 'address': marker_location }, function(results, status) {
          map.setCenter(results[0].geometry.location);
      });
    //Custom Marker image(s)
    let icon = "/images/Water_Droplet_Pin.png";
    //Create markers using location_list
      placeMarker(geocoder, map, "{{ filler.location }}", icon);
  }
  function codeAddress(geocoder, map) {
    geocoder.geocode( { 'address': filler.location}, function(results, status) {
          map.setCenter(results[0].geometry.location);
      });
  }

  function placeMarker(geocoder, map, address, icon) {
    geocoder.geocode( {'address' : address}, function(results, status) {
        marker = new google.maps.Marker ({
          map: map,
          icon: icon,
          position: results[0].geometry.location,
        });
    });
    //return marker;
  }

  </script>
  <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyADULoh4vZX2MsZs4SAgpTgOaXPbjsCNBA&callback=initMap">
  </script>
</div>

<div id='description'>
  <p><u>Location:</u>  {{ filler.location }} </p>
  <p><u>Type:</u> {{ filler.type }} </p>
  <p><u>Company:</u> {{ filler.company }}</p>
  <p><u>Description:</u> {{ filler.description }} </p>
</div>
